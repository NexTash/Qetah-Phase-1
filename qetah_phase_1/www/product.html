{% extends "templates/primary.html" %}

{% block title %} QETAH | product {% endblock %}

{% block content %}


<div class="content-area" :class="{'shifted-content': isStatic}">
    <div class="container section-products">
        <div class="filters">
            <div class="category-filters">
                <h5>Category</h5>
                <hr>
                <label class="check check-dark mt-2"><input type="checkbox" /> Men's Collection </label>
                <label class="check check-dark"><input type="checkbox" /> Women's Collection </label>
                <label class="check check-dark"><input type="checkbox" /> Services </label>
                <h5>Price Range</h5>
                <hr>
                <div class="range-slider">
                    <span class="rangeValues"></span>
                    <input value="1000" min="1000" max="50000" step="500" id="price-range-max" name="price"
                        type="range">
                    <input value="50000" min="1000" max="50000" step="500" id="price-range-min" name="price"
                        type="range">
                </div>
                <h5 class="mt-3">By Rating</h5>
                <hr>
                <div class="field-rating">
                    <input type="radio" id="star5" id="get_ratings" name="rating" value="5">
                    <label for="star5" title="5 stars"></label>
                    <input type="radio" id="star4" name="rating" value="4">
                    <label for="star4" title="4 stars"></label>
                    <input type="radio" id="star3" name="rating" value="3">
                    <label for="star3" title="3 stars"></label>
                    <input type="radio" id="star2" name="rating" value="2">
                    <label for="star2" title="2 stars"></label>
                    <input type="radio" id="star1" name="rating" value="1">
                    <label for="star1" title="1 star"></label>
                </div>
                <h5>Discount's</h5>
                <hr>
                <label class="check check-dark mt-2"><input type="checkbox" /> Sale 35% OFF </label>
                <label class="check check-dark"><input type="checkbox" /> Sale 50% OFF </label>
                <label class="check check-dark"><input type="checkbox" /> Sale 75% OFF </label>
            </div>
        </div>
        <div class="filtered-cards">
            <div class="container model-container" x-data="{ isOpen: false }">
                <button class="btn btn-light btn-icon btn-model" x-on:click="isOpen = true">Filters</button>
                <div class="modal active" x-show="isOpen" x-transition>
                    <div class="modal-dialog">
                        <div class="modal-content" @click.away="isOpen = false">
                            <div class="modal-head">
                                <h3 class="modal-title">Filter</h3>
                                <button x-on:click="isOpen = false"
                                    class="btn btn-danger btn-icon btn-circle btn-circle-sm bx bx-x"></button>
                            </div>
                            <div class="modal-body">
                                <div class="filters-model-body">
                                    <div class="category-filters">
                                        <h5>Category</h5>
                                        <hr>
                                        <label class="check check-dark mt-2"><input type="checkbox" /> Men's Collection
                                        </label>
                                        <label class="check check-dark"><input type="checkbox" /> Women's Collection
                                        </label>
                                        <label class="check check-dark"><input type="checkbox" /> Services </label>
                                        <h5>Price Range</h5>
                                        <hr>
                                        <div class="model-range-slider">
                                            <span class="rangeValues"></span>
                                            <input value="1000" min="1000" max="50000" step="500" type="range">
                                            <input value="50000" min="1000" max="50000" step="500" type="range">
                                        </div>
                                        <h5 class="mt-3">By Rating</h5>
                                        <hr>
                                        <div class="field-rating">
                                            <input type="radio" id="star5" name="rating" value="5">
                                            <label for="star5" title="5 stars"></label>
                                            <input type="radio" id="star4" name="rating" value="4">
                                            <label for="star4" title="4 stars"></label>
                                            <input type="radio" id="star3" name="rating" value="3">
                                            <label for="star3" title="3 stars"></label>
                                            <input type="radio" id="star2" name="rating" value="2">
                                            <label for="star2" title="2 stars"></label>
                                            <input type="radio" id="star1" name="rating" value="1">
                                            <label for="star1" title="1 star"></label>
                                        </div>
                                        <h5>Discount's</h5>
                                        <hr>
                                        <label class="check check-dark mt-2"><input type="checkbox" /> Sale 35% OFF
                                        </label>
                                        <label class="check check-dark"><input type="checkbox" /> Sale 50% OFF </label>
                                        <label class="check check-dark"><input type="checkbox" /> Sale 75% OFF </label>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-foot">
                                <button class="btn" x-on:click="isOpen = false">Cancel</button>
                                <button class="btn btn-primary">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <form class="field field-inline">
                <input type="text" class="field-text" placeholder="Search..." />
                <button class="field-icon bx bx-search"></button>
            </form>
            <div class="cards">
                <div class="boxed">
                    <!-- Alpine.js Data for Tab Control -->
                    <div class="tabs" x-data="{ OpenTab: 1 }">
                        <!-- Tabs -->
                        <div class="tabs-items">
                            <!-- Tab Buttons -->
                            <button class="tab-item" :class="OpenTab == 1 ? 'active' : 'inactive'"
                                @click="OpenTab = 1">All</button>
                            <button class="tab-item" :class="OpenTab == 2 ? 'active' : 'inactive'"
                                @click="OpenTab = 2">Un-stitched</button>
                            <button class="tab-item" :class="OpenTab == 3 ? 'active' : 'inactive'"
                                @click="OpenTab = 3">ReadyMade</button>
                            <button class="tab-item" :class="OpenTab == 4 ? 'active' : 'inactive'"
                                @click="OpenTab = 4">Accessories</button>
                            <button class="tab-item" :class="OpenTab == 5 ? 'active' : 'inactive'"
                                @click="OpenTab = 5">Perfumes</button>
                            <button class="tab-item" :class="OpenTab == 6 ? 'active' : 'inactive'"
                                @click="OpenTab = 6">Cutting & Stitching</button>
                        </div>

                        <!-- Tab Panes -->
                        <div class="tab-panes">

                            <!-- All Products Tab -->
                            <div x-show="OpenTab == 1" class="tab-pane">
                                <div class="row">
                                    {% for product in products %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del></div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> ({{product.sold}}) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- Un-stitched Products Tab -->
                            <div x-show="OpenTab == 2" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Un-stitched' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del></div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- ReadyMade Products Tab -->
                            <div x-show="OpenTab == 3" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'ReadyMade' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del></div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- Accessories Products Tab -->
                            <div x-show="OpenTab == 4" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Accessories' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del></div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- Perfumes Products Tab -->
                            <div x-show="OpenTab == 5" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Perfumes' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del></div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- Cutting & Stitching Products Tab -->
                            <div x-show="OpenTab == 6" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Cutting & Stitching' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del></div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>
</div>


{% endblock %}

{% block scripts %}

<script>
    function getVals() {
        // Get slider values
        let parent = this.parentNode;
        let slides = parent.getElementsByTagName("input");
        let slide1 = parseFloat(slides[0].value);
        let slide2 = parseFloat(slides[1].value);

        // Ensure slide1 is always less than slide2
        if (slide1 > slide2) {
            [slide1, slide2] = [slide2, slide1]; // Swap the values
        }

        let displayElement = parent.getElementsByClassName("rangeValues")[0];
        displayElement.innerHTML = "$" + slide1 + " - $" + slide2;
    }

    // Initialize sliders after the DOM content is fully loaded
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize sliders for both types of sliders
        initializeSliders('range-slider');
        initializeSliders('model-range-slider');
    });

    function initializeSliders(className) {
        let sliderSections = document.getElementsByClassName(className);
        for (let x = 0; x < sliderSections.length; x++) {
            let sliders = sliderSections[x].getElementsByTagName("input");
            for (let y = 0; y < sliders.length; y++) {
                if (sliders[y].type === "range") {
                    sliders[y].addEventListener('input', getVals);
                    // Manually trigger event first time to display values
                    sliders[y].dispatchEvent(new Event('input'));
                }
            }
        }
    }
</script>

<!-- header-fixed
   <script>
    let lastScrollTop = 0;
    const header = document.getElementById("header");

    window.addEventListener("scroll", function() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop < lastScrollTop) {
            // Scroll up - show header
            header.style.transform = "translateY(0)";
        } else {
            // Scroll down - hide header
            header.style.transform = "translateY(-100%)";
        }

        lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // For Mobile or negative scrolling
    });
</script> -->

<script>

    $("#search_job_btn").on("click", () => {
        let txt = $("#search_freelancer_text").val()
        document.location.href = document.location.origin + document.location.pathname + "?q=" + txt
    })

    $("#search_freelancer_text").on("keydown", (e) => {
        if (e.which == 13) {
            let txt = $("#search_freelancer_text").val()
            document.location.href = document.location.origin + document.location.pathname + "?q=" + txt
        }
    })
    $("#get_price").on("click", () => {
        let min_price = document.getElementById("price-range-min").value
        let max_price = document.getElementById("price-range-max").value
        document.location.href = document.location.origin + document.location.pathname + "?min_price=" + min_price + "&max_price=" + max_price
    })
    $("#clear_price").on("click", () => {
        document.location.href = document.location.href = document.location.origin + document.location.pathname
    })
    $("#order_by").on("click", () => {
        var radios = document.getElementsByName('sort');

        var selected_order = "";
        for (var i = 0; i < radios.length; i++) {
            if (radios[i].checked) {
                selected_order = radios[i].value;
                break;
            }
        }
        if (selected_order) {
            document.location.href = document.location.href = document.location.origin + document.location.pathname + "?order_by=" + selected_order
        }
    })
    $("#clear_order").on("click", () => {
        document.location.href = document.location.href = document.location.origin + document.location.pathname
    })


    $("#clear_all_filters").on("click", () => {
        document.location.href = document.location.href = document.location.origin + document.location.pathname
    })

    $("#get_categories").on("click", () => {
        var checkedValues = [];
        var checkboxes = document.getElementsByClassName("category-checkbox");
        for (var i = 0; i < checkboxes.length; i++) {
            if (checkboxes[i].checked) {
                checkedValues.push(checkboxes[i].value);
            }
        }
        document.location.href = document.location.href = document.location.origin + document.location.pathname + "?category=" + checkedValues
    })

    $("#get_ratings").on("click", () => {
        let txt = $("input[name='ratings']:checked").val();
        document.location.href = document.location.origin + document.location.pathname + "?q=&ratings=" + txt;
    });


    $("#clear_ratings").on("click", () => {
        $("input[name='ratings']").prop("checked", false);
        document.location.href = document.location.origin + document.location.pathname;
    });

</script>

{% endblock %}