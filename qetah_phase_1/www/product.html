{% extends "templates/primary.html" %}

{% block title %} QETAH | product {% endblock %}

{% block content %}

<!-- sidebar start -->
<aside id="sidebar" class="sidebar-header" :class="{'static-sidebar': isStatic}" x-data="{ sidebarOpen: false }">
    <!-- Course Sidebar Header -->
    <header class="program-sidebar">
        <div class="program-sidebar-brand">
            <div class="sidebar-brand">
                <!-- Large Logo -->
                <a href="#" class="lg-logo" x-show="isStatic">
                    <img src="/assets/qetah_phase_1/images/black-qetah-removebg-preview.png" width="100px"
                        class="lg-img" alt="Logo" />
                </a>
                <!-- Small Logo -->
                <a href="#" class="sm-logo">
                    <img src="/assets/qetah_phase_1/images/WhatsApp_Image_2024-08-08_at_13.44.53_b31d506f-removebg-preview.png"
                        class="sm-img" alt="Responsive Logo" width="30px" />
                </a>
            </div>
        </div>
        <div class="sidebar-auth">
            <a href="/index" data-target="sidebar-tooltip" data-title="Home">
                <img src="/assets/qetah_phase_1/images/black-qetah-removebg-preview.png" class="logo-header"
                    width="20px" height="20px" alt="" srcset="">
                <br>
            </a>
            <a href="/index" data-target="sidebar-tooltip" data-title="Home">
                <div class="auth-media">
                    <i class="bx bx-home"></i>
                    <div class="auth-intro" x-show="isStatic" x-cloak>
                        <h3 class="heading"><a href="/index">Home</a></h3>
                    </div>
                </div>
            </a>
            <a href="">
                <hr style="height: 2px;border: none; background-color: rgb(150, 150, 150);">
                <span class="divider divider-text divider-secondary">About</span>
            </a>
            <a href="/story" data-target="sidebar-tooltip" data-title="Story">
                <div class="auth-media">
                    <i class="bx bx-book"></i>
                    <div class="auth-intro" x-show="isStatic" x-cloak>
                        <h3 class="heading"><a href="/story">Story</a></h3>
                    </div>
                </div>
            </a>
            <a href="/Blogs" data-target="sidebar-tooltip" data-title="Blogs">
                <div class="auth-media">
                    <i class="bx bx-spreadsheet"></i>
                    <div class="auth-intro" x-show="isStatic" x-cloak>
                        <h3 class="heading"><a href="/Blogs">Blogs</a></h3>
                    </div>
                </div>
            </a>
            <a href="/contact-us" data-target="sidebar-tooltip" data-title="Contact Us">
                <div class="auth-media">
                    <i class="bx bx-phone"></i>
                    <div class="auth-intro" x-show="isStatic" x-cloak>
                        <h3 class="heading">
                            <a href="/contact-us">Contact Us</a>
                        </h3>
                    </div>
                </div>
            </a>
            <a href="">
                <hr style="height: 2px;border: none; background-color: rgb(150, 150, 150);">
                <span class="divider divider-text divider-secondary">About</span>
            </a>
            <a href="/product" data-target="sidebar-tooltip" data-title="Shop">
                <div class="auth-media sidebar-active">
                    <i class="bx bx-store"></i>
                    <div class="auth-intro" x-show="isStatic" x-cloak>
                        <h3 class="heading"><a href="/product">Shop</a></h3>
                    </div>
                </div>
            </a>

            <!-- Men's Collection Dropdown -->
            <div class="auth-media">
                <a href="/product" data-target="sidebar-tooltip" data-title="Men's collection">
                    <i class="bx bx-male"></i>
                </a>
                <div class="auth-intro" x-show="isStatic" x-cloak>
                    <div x-data="{ open: false, isActive: false }">
                        <div @click="open = !open; applyCategoryFilter('Men\'s Collection'); isActive = true;"
                            class="cursor-pointer">
                            <h6 class="text-center text-dark side-coll" :class="{ 'active': isActive }"
                                style="cursor: pointer; font-size: 14px;">
                                Men's Collection
                            </h6>
                            <i class="bx bx-chevron-down"></i>
                        </div>
                        <div class="drops" x-show="open" x-cloak>
                            <ul class="ml-4">
                                <li><a href="/product">Unstitched</a></li>
                                <li><a href="/product">Readymade Clothes</a></li>
                                <li><a href="/product">Accessories</a></li>
                                <li><a href="/product">Perfumes</a></li>
                                <li><a href="/product">Cutting, Stitching</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Women's Collection Dropdown -->
            <div class="auth-media">
                <a href="/product" data-target="sidebar-tooltip" data-title="Women's collection">
                    <i class="bx bx-female"></i>
                </a>
                <div class="auth-intro" x-show="isStatic" x-cloak>
                    <div x-data="{ open: false, isActive: false }">
                        <div @click="open = !open; applyCategoryFilter('Women\'s Collection'); isActive = true;"
                            class="cursor-pointer">
                            <h6 class="text-center text-dark side-coll" :class="{ 'active': isActive }"
                                style="cursor: pointer; font-size: 14px;">
                                Women's Collection
                            </h6>
                            <i class="bx bx-chevron-down"></i>
                        </div>
                        <div class="drops" x-show="open" x-cloak>
                            <ul class="list ml-4">
                                <li><a href="/product">Unstitched</a></li>
                                <li><a href="/product">Readymade Clothes</a></li>
                                <li><a href="/product">Accessories</a></li>
                                <li><a href="/product">Perfumes</a></li>
                                <li><a href="/product">Cutting, Stitching</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>


            <a href="">
                <hr style="height: 2px;border: none; background-color: rgb(150, 150, 150);">
                <span class="divider divider-text divider-secondary">Cart</span>
            </a>
            <a href="/cart-items" data-target="sidebar-tooltip" data-title="Cart">
                <div class="auth-media">
                    <i class="bx bx-cart"></i>
                    <div class="auth-intro" x-show="isStatic" x-cloak>
                        <h3 class="heading">
                            <a href="/cart-items">Cart</a>
                        </h3>
                    </div>
                </div>
            </a>
            <div class="language">
                <a href="">
                    <hr style="height: 2px;border: none; background-color: rgb(150, 150, 150);">
                    <span class="divider divider-text divider-secondary">Languages</span>
                </a>
                <div class="field field-inline field-light">
                    <select name="" id="" class="field-select" style="background-image: none !important;">
                        <option value="Option">ENG</option>
                        <option value="Option">ARA</option>
                    </select>
                </div>
                <!-- Additional Sidebar Items -->
            </div>
        </div>
    </header>
    <!-- Course Sidebar Header End -->
</aside>
<!--/ Course Sidebar End -->
<div class="content-area" :class="{'shifted-content': isStatic}">
    <div class="container section-products">
        <div class="filters">

            <div class="category-filters">
                <h5>Category</h5>
                <hr>
                <label class="check check-dark mt-2">
                    <input type="checkbox" name="category" value="Men's Collection" /> Men's Collection
                </label>
                <label class="check check-dark">
                    <input type="checkbox" name="category" value="Women's Collection" /> Women's Collection
                </label>
                <label class="check check-dark">
                    <input type="checkbox" name="category" value="Services" /> Services
                </label>
                <h5>Price Range</h5>
                <hr>
                <div class="range-slider">
                    <span class="rangeValues"></span>
                    <input value="1000" min="1000" max="50000" step="500" id="price-range-min" name="min_price"
                        type="range">
                    <input value="50000" min="1000" max="50000" step="500" id="price-range-max" name="max_price"
                        type="range">
                </div>
                <h5 class="mt-3">By Rating</h5>
                <hr>
                <div class="field-rating">
                    <input type="radio" id="star5" name="rating" value="5">
                    <label for="star5" title="5 stars"></label>
                    <input type="radio" id="star4" name="rating" value="4">
                    <label for="star4" title="4 stars"></label>
                    <input type="radio" id="star3" name="rating" value="3">
                    <label for="star3" title="3 stars"></label>
                    <input type="radio" id="star2" name="rating" value="2">
                    <label for="star2" title="2 stars"></label>
                    <input type="radio" id="star1" name="rating" value="1">
                    <label for="star1" title="1 star"></label>
                </div>
                <h5>Discounts</h5>
                <hr>
                <label class="check check-dark mt-2">
                    <input type="checkbox" name="discount" value="35" /> Sale 35% OFF
                </label>
                <label class="check check-dark">
                    <input type="checkbox" name="discount" value="50" /> Sale 50% OFF
                </label>
                <label class="check check-dark">
                    <input type="checkbox" name="discount" value="75" /> Sale 75% OFF
                </label>
                <button type="button" class="btn btn-secondary" onclick="applyFilters()">Apply</button>
            </div>
        </div>
        <div class="filtered-cards">
            <div class="container model-container" x-data="{ isOpen: false }">
                <button class="btn btn-light btn-icon btn-model" x-on:click="isOpen = true">Filters</button>
                <div class="modal active" x-show="isOpen" x-transition>
                    <div class="modal-dialog">
                        <div class="modal-content" @click.away="isOpen = false">
                            <div class="modal-head">
                                <h3 class="modal-title">Filter</h3>
                                <button x-on:click="isOpen = false"
                                    class="btn btn-danger btn-icon btn-circle btn-circle-sm bx bx-x"></button>
                            </div>
                            <div class="modal-body">
                                <div class="filters-model-body">
                                    <div class="category-filters">
                                        <h5>Category</h5>
                                        <hr>
                                        <label class="check check-dark mt-2"><input type="checkbox" /> Men's Collection
                                        </label>
                                        <label class="check check-dark"><input type="checkbox" /> Women's Collection
                                        </label>
                                        <label class="check check-dark"><input type="checkbox" /> Services </label>
                                        <h5>Price Range</h5>
                                        <hr>
                                        <div class="model-range-slider">
                                            <span class="rangeValues"></span>
                                            <input value="1000" min="1000" max="50000" step="500" type="range">
                                            <input value="50000" min="1000" max="50000" step="500" type="range">
                                        </div>
                                        <h5 class="mt-3">By Rating</h5>
                                        <hr>
                                        <div class="field-rating">
                                            <input type="radio" id="star5" name="rating" value="5">
                                            <label for="star5" title="5 stars"></label>
                                            <input type="radio" id="star4" name="rating" value="4">
                                            <label for="star4" title="4 stars"></label>
                                            <input type="radio" id="star3" name="rating" value="3">
                                            <label for="star3" title="3 stars"></label>
                                            <input type="radio" id="star2" name="rating" value="2">
                                            <label for="star2" title="2 stars"></label>
                                            <input type="radio" id="star1" name="rating" value="1">
                                            <label for="star1" title="1 star"></label>
                                        </div>
                                        <h5>Discount's</h5>
                                        <hr>
                                        <label class="check check-dark mt-2"><input type="checkbox" /> Sale 35% OFF
                                        </label>
                                        <label class="check check-dark"><input type="checkbox" /> Sale 50% OFF </label>
                                        <label class="check check-dark"><input type="checkbox" /> Sale 75% OFF </label>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-foot">
                                <button class="btn" x-on:click="isOpen = false">Cancel</button>
                                <button class="btn btn-primary">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <form class="field field-inline" onsubmit="applyFilters(event)">
                <input type="text" class="field-text" id="search-query" placeholder="Search..." name="q" />
                <button type="submit" class="field-icon bx bx-search"></button>
            </form>
            <div class="cards">
                <div class="boxed">
                    <!-- Alpine.js Data for Tab Control -->
                    <div class="tabs" x-data="{ OpenTab: 1 }">
                        <!-- Tabs -->
                        <div class="tabs-items">
                            <!-- Tab Buttons -->
                            <button class="tab-item" :class="OpenTab == 1 ? 'active' : 'inactive'"
                                @click="OpenTab = 1">All</button>
                            <button class="tab-item" :class="OpenTab == 2 ? 'active' : 'inactive'"
                                @click="OpenTab = 2">Un-stitched</button>
                            <button class="tab-item" :class="OpenTab == 3 ? 'active' : 'inactive'"
                                @click="OpenTab = 3">ReadyMade</button>
                            <button class="tab-item" :class="OpenTab == 4 ? 'active' : 'inactive'"
                                @click="OpenTab = 4">Accessories</button>
                            <button class="tab-item" :class="OpenTab == 5 ? 'active' : 'inactive'"
                                @click="OpenTab = 5">Perfumes</button>
                            <button class="tab-item" :class="OpenTab == 6 ? 'active' : 'inactive'"
                                @click="OpenTab = 6">Cutting & Stitching</button>
                        </div>

                        <!-- Tab Panes -->
                        <div class="tab-panes">

                            <!-- All Products Tab -->
                            <div x-show="OpenTab == 1" class="tab-pane">
                                <div class="row">
                                    {% for product in products %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">

                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.discount}}</del>
                                                    </div>
                                                    <div class="card-title card-price">$ {{ variation.price }}</div>
                                                </div>
                                                {% endfor %}

                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating }}</span> ({{product.sold}}) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill btn-cart"
                                                    onclick="cart()"><i class="bx bx-cart icon-pre"></i> Buy
                                                    Now</button>
                                                <button
                                                    class="btn btn-light btn-icon btn-circle bx bx-heart btn-heart"></button>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- Un-stitched Products Tab -->
                            <div x-show="OpenTab == 2" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Un-stitched' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del>
                                                    </div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill btn-cart"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- ReadyMade Products Tab -->
                            <div x-show="OpenTab == 3" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'ReadyMade' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del>
                                                    </div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill btn-cart"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- Accessories Products Tab -->
                            <div x-show="OpenTab == 4" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Accessories' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del>
                                                    </div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill btn-cart"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- Perfumes Products Tab -->
                            <div x-show="OpenTab == 5" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Perfumes' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del>
                                                    </div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill btn-cart"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                            <!-- Cutting & Stitching Products Tab -->
                            <div x-show="OpenTab == 6" class="tab-pane">
                                <div class="row">
                                    {% for product in products if product.category == 'Cutting & Stitching' %}
                                    <div class="products">
                                        <div class="badge badge-primary badge-pill">{{ product.title }}</div>
                                        <div class="card product-card">
                                            <a href="/product-detail?id={{product.name}}">
                                                <div class="card-head">
                                                    <img class="card-image" src="{{ product.featured_image }}"
                                                        alt="Product Image">
                                                </div>
                                            </a>
                                            <div class="card-body">
                                                {% if product.variations %}
                                                {% for variation in product.variations %}
                                                <div class="variation">
                                                    <div class="card-title">{{ variation.title }}</div>
                                                    <div class="card-desc text-ellipsis text-ellipsis-2">{{
                                                        variation.description }}</div>
                                                    <div class="card-subtitle"><del>{{ variation.price }}</del>
                                                    </div>
                                                    <div class="card-title">USD {{ variation.discount }}</div>
                                                </div>
                                                {% endfor %}
                                                {% else %}
                                                <p>No variations available</p>
                                                {% endif %}
                                                <div class="card-rating">
                                                    <i class="bx bxs-star"></i>
                                                    <span>{{ product.rating_count }}</span> (12.3k) Sold
                                                </div>
                                            </div>
                                            <div class="card-foot">
                                                <button class="btn btn-light btn-icon btn-pill btn-cart"><i
                                                        class="bx bx-cart icon-pre"></i> Buy Now</button>
                                                <button class="btn btn-light btn-icon btn-circle bx bx-heart"></button>
                                            </div>
                                        </div>
                                    </div> {% endfor %}
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>
</div>
<script>
    function cart() {
        var fullname = document.getElementById("fullname").value;
        var email = document.getElementById("email").value;
        var phone = document.getElementById("phone").value;
        var message = document.getElementById("message").value;

        frappe.call({
            method: 'qetah_phase_1.events.contact_us.contacts',
            args: {
                fullname: fullname,
                email: email,
                phone: phone,
                message: message,
            },
            callback(r) {
                document.getElementById("messages").innerHTML = r.message;
                document.getElementById("fullname").value = ""
                document.getElementById("email").value = ""
                document.getElementById("phone").value = ""
                document.getElementById("message").value = ""
            }
        });
    }
</script>
{% endblock %}
{% block scripts %}
<script>
    function applyCategoryFilter(category) {
        const filters = {
            category: category // Set the category filter based on the user's selection
        };

        // Construct the query string and update the URL
        const queryString = new URLSearchParams(filters).toString();
        window.location.href = `/product?${queryString}`;
    }
</script>
<script>
    function applyFilters(event) {
        if (event) event.preventDefault(); // Prevent the form from submitting normally

        const filters = {
            q: document.getElementById('search-query') ? document.getElementById('search-query').value : '',  // Check if element exists
            category: Array.from(document.querySelectorAll('input[name="category"]:checked')).map(el => el.value),
            min_price: document.getElementById('price-range-min').value,
            max_price: document.getElementById('price-range-max').value,
            rating: document.querySelector('input[name="rating"]:checked') ? document.querySelector('input[name="rating"]:checked').value : '',
            discount: Array.from(document.querySelectorAll('input[name="discount"]:checked')).map(el => el.value)
        };

        const queryString = new URLSearchParams(filters).toString();
        window.location.href = `/product?${queryString}`;
    }
</script>
<script>
    function getVals() {
        // Get slider values
        let parent = this.parentNode;
        let slides = parent.getElementsByTagName("input");
        let slide1 = parseFloat(slides[0].value);
        let slide2 = parseFloat(slides[1].value);

        // Ensure slide1 is always less than slide2
        if (slide1 > slide2) {
            [slide1, slide2] = [slide2, slide1]; // Swap the values
        }

        let displayElement = parent.getElementsByClassName("rangeValues")[0];
        displayElement.innerHTML = "$" + slide1 + " - $" + slide2;
    }

    // Initialize sliders after the DOM content is fully loaded
    document.addEventListener('DOMContentLoaded', function () {
        // Initialize sliders for both types of sliders
        initializeSliders('range-slider');
        initializeSliders('model-range-slider');
    });

    function initializeSliders(className) {
        let sliderSections = document.getElementsByClassName(className);
        for (let x = 0; x < sliderSections.length; x++) {
            let sliders = sliderSections[x].getElementsByTagName("input");
            for (let y = 0; y < sliders.length; y++) {
                if (sliders[y].type === "range") {
                    sliders[y].addEventListener('input', getVals);
                    // Manually trigger event first time to display values
                    sliders[y].dispatchEvent(new Event('input'));
                }
            }
        }
    }
</script>
<!-- cart -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const offcanvas = document.getElementById('offcanvas-cart');
        const offcanvasBody = offcanvas.querySelector('.offcanvas-body-cart'); // Add this line to get the offcanvas body
        const badge = document.querySelector('.cart-badge'); // Update this selector if needed
        const deleteSelectedBtn = document.getElementById('del-cart');

        let wishlist = [];

        function updateOffcanvas() {
            // Clear the current items
            offcanvasBody.innerHTML = '';

            // Add each item in the wishlist to the offcanvas
            wishlist.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'items d-flex';
                itemDiv.innerHTML = `
                <div class="check-item" >
                    <label class="check check-secondary">
                        <input type="checkbox" class="item-checkbox" data-index="${index}" />
                    </label>
                </div>
                <img src="${item.image}" alt="${item.title}" class="offcanvas-image" />
                <div class="text">
                    <p class="offcanvas-title text-ellipsis">${item.title}</p>
                    <div class="text-ellipsis text-ellipsis-2" style="font-size: 13px;margin-top: -10px;color: #626161;}">${item.desc}</div>
                     <div class="quantity-counter">
                    <p class="price update-price" data-price-per-item="${item.price}">${item.price}</p> 
                            <div class="counter">
            <button class="btn btn-light btn-circle btn-circle-sm bx bx-minus counter-decrement"></button>
            <input class="counter-value value" type="number" value="1" min="0" />
            <button class="btn btn-light btn-circle btn-circle-sm bx bx-plus counter-increment"></button>
        </div> 
                          </div>
                    
                </div>
            `;
                offcanvasBody.appendChild(itemDiv);
            });

            // Update badge number
            badge.textContent = wishlist.length;
        }

        function addToWishlist(product) {
            // Add the product to the wishlist array
            wishlist.push(product);
            // Update the offcanvas display
            updateOffcanvas();
        }

        document.querySelectorAll('.btn-cart').forEach(button => {
            button.addEventListener('click', (e) => {
                const productCard = e.target.closest('.product-card');
                if (!productCard) return;

                // Get product details from the card
                const product = {
                    title: productCard.querySelector('.card-title').innerText,
                    image: productCard.querySelector('.card-image').src,
                    desc: productCard.querySelector('.card-desc').innerText,
                    price: productCard.querySelector('.card-price').innerText,
                };

                // Add product to wishlist
                addToWishlist(product);
            });
        });

        deleteSelectedBtn.addEventListener('click', () => {
            const checkboxes = offcanvasBody.querySelectorAll('.item-checkbox');

            // Iterate backward to safely remove items
            for (let i = checkboxes.length - 1; i >= 0; i--) {
                const checkbox = checkboxes[i];
                if (checkbox.checked) {
                    const index = parseInt(checkbox.getAttribute('data-index'), 10);
                    wishlist.splice(index, 1);
                    checkbox.closest('.items').remove();
                }
            }

            updateOffcanvas();
        });
    });
</script>
<!-- wishlist -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const offcanvas = document.getElementById('offcanvas');
        const offcanvasBody = offcanvas.querySelector('.offcanvas-body'); // Add this line to get the offcanvas body
        const badge = document.querySelector('.noti-badge'); // Update this selector if needed
        const deleteSelectedBtn = document.getElementById('deleteSelectedBtn');

        let wishlist = [];

        function updateOffcanvas() {
            // Clear the current items
            offcanvasBody.innerHTML = '';

            // Add each item in the wishlist to the offcanvas
            wishlist.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'items d-flex';
                itemDiv.innerHTML = `
            <div class="check-item">
                <label class="check check-secondary">
                    <input type="checkbox" class="item-checkbox" data-index="${index}" />
                </label>
            </div>
            <img src="${item.image}" alt="${item.title}" class="offcanvas-image" />
            <div class="text">
                  <p class="offcanvas-title text-ellipsis">${item.title}</p>
                <div class="text-ellipsis text-ellipsis-2" style="font-size: 13px;margin-top: -10px;color: #626161;}">${item.desc}</div>
                    <div class="quantity-counter">
                            <p class="price update-price" data-price-per-item="${item.price}">${item.price}</p> 
                        <div class="counter">
                            <button class="btn btn-light btn-circle btn-circle-sm bx bx-minus counter-decrement"></button>
                            <input class="counter-value value" type="number" value="1" min="0" />
                            <button class="btn btn-light btn-circle btn-circle-sm bx bx-plus counter-increment"></button>
                        </div> 
                     </div>
                  </div>
        `;
                offcanvasBody.appendChild(itemDiv);
            });
            badge.textContent = wishlist.length;
        }

        function addToWishlist(product) {
            // Add the product to the wishlist array
            wishlist.push(product);
            // Update the offcanvas display
            updateOffcanvas();
        }

        document.querySelectorAll('.btn-heart').forEach(button => {
            button.addEventListener('click', (e) => {
                const productCard = e.target.closest('.product-card');
                if (!productCard) return;

                // Get product details from the card
                const product = {
                    title: productCard.querySelector('.card-title').innerText,
                    image: productCard.querySelector('.card-image').src,
                    desc: productCard.querySelector('.card-desc').innerText,
                    price: productCard.querySelector('.card-price').innerText,
                };
                addToWishlist(product);
            });
        });

        deleteSelectedBtn.addEventListener('click', () => {
            const checkboxes = offcanvasBody.querySelectorAll('.item-checkbox');
            // Iterate backward to safely remove items
            for (let i = checkboxes.length - 1; i >= 0; i--) {
                const checkbox = checkboxes[i];
                if (checkbox.checked) {
                    const index = parseInt(checkbox.getAttribute('data-index'), 10);
                    wishlist.splice(index, 1);
                    checkbox.closest('.items').remove();
                }
            }
            updateOffcanvas();
        });

    });
    
    

</script>
<!-- quanitity -->
<script>
 document.addEventListener('DOMContentLoaded', () => {
    const selectAll1 = document.getElementById("selectAll1");
    const offcanvasBody1 = document.getElementById("offcanvasBody");
    const selectAll2 = document.getElementById("selectAll2");
    const offcanvasBody2 = document.getElementById("offcanvasBody-cart");
    
    const quantity1 = document.querySelector(".quantity");
    const quantity2 = document.querySelector(".quantity-cart");

    function updateQuantity(offcanvasBody, quantityElement) {
        if (!offcanvasBody || !quantityElement) return;
        const checkboxes = offcanvasBody.querySelectorAll(".item-checkbox");
        const checkedCount = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
        quantityElement.textContent = checkedCount;
    }

    if (selectAll1 && offcanvasBody1) {
        selectAll1.addEventListener('change', () => {
            const checkboxes = offcanvasBody1.querySelectorAll(".item-checkbox");
            checkboxes.forEach(checkbox => checkbox.checked = selectAll1.checked);
            updateQuantity(offcanvasBody1, quantity1);
        });

        offcanvasBody1.addEventListener('change', () => {
            const checkboxes = offcanvasBody1.querySelectorAll(".item-checkbox");
            selectAll1.checked = Array.from(checkboxes).every(checkbox => checkbox.checked);
            updateQuantity(offcanvasBody1, quantity1);
        });
    }

    if (selectAll2 && offcanvasBody2) {
        selectAll2.addEventListener('change', () => {
            const checkboxes = offcanvasBody2.querySelectorAll(".item-checkbox");
            checkboxes.forEach(checkbox => checkbox.checked = selectAll2.checked);
            updateQuantity(offcanvasBody2, quantity2);
        });

        offcanvasBody2.addEventListener('change', () => {
            const checkboxes = offcanvasBody2.querySelectorAll(".item-checkbox");
            selectAll2.checked = Array.from(checkboxes).every(checkbox => checkbox.checked);
            updateQuantity(offcanvasBody2, quantity2);
        });
    }
});

</script>
<!-- quanity ===========>>>>>> price -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.addEventListener('click', (event) => {
            const target = event.target;

            if (target.classList.contains('counter-increment') || target.classList.contains('counter-decrement')) {
                const counter = target.closest('.counter');

                if (!counter) {
                    return;
                }

                const counterValue = counter.querySelector('.counter-value');

                if (!counterValue) {
                    return;
                }

                const priceElement = counter.closest('.quantity-counter').querySelector('.update-price');

                if (!priceElement) {
                    return;
                }

                // Get current total price and price per item
                let totalPrice = parseFloat(priceElement.textContent.replace(/[^0-9.-]/g, '')); // Remove $ and other non-numeric characters
                if (isNaN(totalPrice)) {
                    return;
                }

                let priceText = priceElement.getAttribute('data-price-per-item'); // Assume price per item is stored in a data attribute
                let pricePerItem = parseFloat(priceText.replace(/[^0-9.-]/g, '')); // Remove $ and other non-numeric characters
                if (isNaN(pricePerItem)) {
                    return;
                }

                // Update quantity
                let count = parseInt(counterValue.value, 10) || 0;
                if (target.classList.contains('counter-increment')) {
                    count++;
                    totalPrice += pricePerItem;
                } else if (target.classList.contains('counter-decrement')) {
                    if (count > 0) {
                        count--;
                        totalPrice -= pricePerItem;
                    }
                }

                // Update counter value and price
                counterValue.value = count;
                priceElement.textContent = `$${totalPrice.toFixed(2)}`; // Format price with $ symbol
            }
        });
    });
</script>
<script>
function updateSubtotal() {
    let subtotal = 0;
    console.log('Updating subtotal...');

    document.querySelectorAll('.items').forEach((item) => {
        const checkbox = item.querySelector('.item-checkbox');
        console.log('Checkbox:', checkbox);

        if (checkbox && checkbox.checked) {
            const priceElement = item.querySelector('.price');
            const quantityInput = item.querySelector('.counter-value');
            console.log('Price element:', priceElement ? priceElement.outerHTML : 'Not found');
            console.log('Quantity input:', quantityInput ? quantityInput.outerHTML : 'Not found');

            if (priceElement && quantityInput) {
                // Use parseFloat to convert the price to a floating-point number
                const pricePerItem = (priceElement.getAttribute('data-price-per-item'));
                // Use parseInt to convert the quantity to an integer
                const quantity = (quantityInput.value, "0");

                console.log(`Price per item: ${pricePerItem} (Type: ${typeof pricePerItem})`);
                console.log(`Quantity: ${quantity} (Type: ${typeof quantity})`);

                if (!(pricePerItem) || (quantity)) {
                    subtotal = pricePerItem + quantity;
                    console.log(`Subtotal so far: ${subtotal}`);
                } else {
                    console.log('Invalid price or quantity');
                }
            }
        }
    });

    console.log(`Final subtotal: ${subtotal}`);
    document.getElementById('subTotal').textContent = `${subtotal}`;
}

document.addEventListener('change', (event) => {
    if (event.target.classList.contains('item-checkbox') || event.target.classList.contains('counter-value')) {
        updateSubtotal();
    }
});

// document.addEventListener('click', (event) => {
//     if (event.target.classList.contains('counter-increment') || event.target.classList.contains('counter-decrement')) {
//         const input = event.target.closest('.quantity-counter').querySelector('.counter-value');
//         if (event.target.classList.contains('counter-increment')) {
//             input.value = parseInt(input.value, 10) + 1;
//         } else if (event.target.classList.contains('counter-decrement')) {
//             input.value = Math.max(0, parseInt(input.value, 10) - 1);
//         }
//         updateSubtotal();
//     }
// });
document.addEventListener('DOMContentLoaded', () => {
        updateSubtotal(); // Test with static content
    });
</script>


{% endblock %}